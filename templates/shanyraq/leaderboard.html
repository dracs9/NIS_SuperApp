{% extends "base.html" %}

{% block title %}Leaderboard – ShanyraqOS{% endblock %}

{% block content %}
<div class="mx-auto max-w-4xl">
  <h1 class="text-2xl sm:text-3xl font-bold text-zinc-900 dark:text-zinc-100">Leaderboard</h1>
  <p class="mt-1 text-sm text-zinc-500 dark:text-zinc-400">Top shanyraqs and students by Qanat points</p>

  <div class="mt-8 grid gap-8 lg:grid-cols-2">
    <section class="rounded-2xl border border-zinc-200 bg-white shadow-soft dark:border-zinc-700 dark:bg-zinc-800 overflow-hidden">
      <div class="border-b border-zinc-200 bg-zinc-50 px-4 py-3 dark:border-zinc-700 dark:bg-zinc-700/50">
        <h2 class="text-lg font-semibold text-zinc-900 dark:text-zinc-100">Top Shanyraqs</h2>
      </div>
      <ul class="divide-y divide-zinc-200 dark:divide-zinc-700">
        {% for s in leaderboard_shanyraqs %}
        <li class="flex items-center justify-between px-4 py-3 hover:bg-zinc-50 dark:hover:bg-zinc-700/30">
          <a href="{% url 'shanyraq:detail' s.slug %}" class="flex items-center gap-3 font-medium text-zinc-900 dark:text-zinc-100 hover:text-emerald-600 dark:hover:text-emerald-400">
            <span class="flex h-8 w-8 items-center justify-center rounded-full bg-emerald-100 text-sm font-bold text-emerald-700 dark:bg-emerald-900/50 dark:text-emerald-300">{{ forloop.counter }}</span>
            {{ s.name }}
          </a>
          <span class="font-semibold text-emerald-600 dark:text-emerald-400">{{ s.total_points }} pts</span>
        </li>
        {% empty %}
        <li class="px-4 py-6 text-center text-sm text-zinc-500 dark:text-zinc-400">No shanyraqs yet.</li>
        {% endfor %}
      </ul>
    </section>

    <section class="rounded-2xl border border-zinc-200 bg-white shadow-soft dark:border-zinc-700 dark:bg-zinc-800 overflow-hidden">
      <div class="border-b border-zinc-200 bg-zinc-50 px-4 py-3 dark:border-zinc-700 dark:bg-zinc-700/50">
        <h2 class="text-lg font-semibold text-zinc-900 dark:text-zinc-100">Top Students</h2>
      </div>
      <ul class="divide-y divide-zinc-200 dark:divide-zinc-700">
        {% for row in leaderboard_students %}
        <li class="flex items-center justify-between px-4 py-3 hover:bg-zinc-50 dark:hover:bg-zinc-700/30">
          <a href="{% url 'shanyraq:user_contribution' row.user.id %}" class="flex items-center gap-3 min-w-0">
            <span class="flex h-8 w-8 shrink-0 items-center justify-center rounded-full bg-indigo-100 text-sm font-bold text-indigo-700 dark:bg-indigo-900/50 dark:text-indigo-300">{{ row.rank }}</span>
            <span class="truncate font-medium text-zinc-900 dark:text-zinc-100">{{ row.profile.display_name|default:row.user.email }}</span>
          </a>
          <span class="ml-2 shrink-0 font-semibold text-emerald-600 dark:text-emerald-400">{{ row.points }} pts</span>
        </li>
        {% empty %}
        <li class="px-4 py-6 text-center text-sm text-zinc-500 dark:text-zinc-400">No students yet.</li>
        {% endfor %}
      </ul>
    </section>
  </div>

  <p class="mt-6 text-sm text-zinc-500 dark:text-zinc-400">
    <a href="{% url 'shanyraq:ledger' %}" class="font-medium text-emerald-600 hover:text-emerald-500 dark:text-emerald-400">View ledger →</a>
  </p>
</div>
{% endblock %}
